"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8678],{8678:(_,c,u)=>{u.r(c),u.d(c,{AlertPageModule:()=>k});var h=u(177),s=u(4341),i=u(4742),g=u(8986),m=u(467),e=u(4438),p=u(4796);function f(t,n){1&t&&(e.j41(0,"div",13),e.EFF(1," *Username es obligatorio "),e.k0s())}function v(t,n){1&t&&(e.j41(0,"div",13),e.EFF(1," *Username debe tener minimo 6 caracteres "),e.k0s())}function F(t,n){if(1&t&&(e.j41(0,"div",13),e.DNE(1,f,2,0,"div",4)(2,v,2,0,"div",4),e.k0s()),2&t){let a,r;const o=e.XpG();e.R7$(),e.Y8G("ngIf",null==(a=o.loginForm.get("username"))?null:a.hasError("required")),e.R7$(),e.Y8G("ngIf",null==(r=o.loginForm.get("username"))?null:r.hasError("minlength"))}}function b(t,n){1&t&&(e.j41(0,"div",13),e.EFF(1," *Password es obligatorio "),e.k0s())}function w(t,n){1&t&&(e.j41(0,"div",13),e.EFF(1," *Password debe tener minimo 8 caracteres "),e.k0s())}function A(t,n){if(1&t&&(e.j41(0,"div",13),e.DNE(1,b,2,0,"div",4)(2,w,2,0,"div",4),e.k0s()),2&t){let a,r;const o=e.XpG();e.R7$(),e.Y8G("ngIf",null==(a=o.loginForm.get("password"))?null:a.hasError("required")),e.R7$(),e.Y8G("ngIf",null==(r=o.loginForm.get("password"))?null:r.hasError("minlength"))}}const P=[{path:"",component:(()=>{var t;class n{constructor(r,o,l,d,E){this.authservice=r,this.alertcontroller=o,this.toast=l,this.router=d,this.fbuilder=E,this.usuario={id:0,username:"",password:"",rut:"",email:"",isactive:!1},this.loginForm=this.fbuilder.group({username:new s.MJ("",[s.k0.required,s.k0.minLength(6)]),password:new s.MJ("",[s.k0.required,s.k0.minLength(8)])})}ngOnInit(){}login(){if(!this.loginForm.valid)return;const o=this.loginForm.value.password;this.authservice.getuserbyusername(this.loginForm.value.username).subscribe(l=>(this.userdata=l,console.log(this.userdata),0===this.userdata.length?(this.loginForm.reset(),void this.UsuarioNoExiste()):(this.usuario={id:this.userdata[0].id,username:this.userdata[0].username,password:this.userdata[0].password,rut:this.userdata[0].rut,email:this.userdata[0].email,isactive:this.userdata[0].isactive},this.usuario.password!==o?(this.loginForm.reset(),void this.ErrorUsuario()):this.usuario.isactive?void this.IniciarSesion(this.usuario):(this.loginForm.reset(),void this.UsuarioInactivo()))))}IniciarSesion(r){sessionStorage.setItem("username",r.username),sessionStorage.setItem("password",r.password),sessionStorage.setItem("rut",r.rut),sessionStorage.setItem("email",r.email),sessionStorage.setItem("ingresado","true"),this.showToast("Sesi\xf3n Iniciada "+this.usuario.username),this.router.navigate(["/home"])}showToast(r){var o=this;return(0,m.A)(function*(){(yield o.toast.create({message:r,duration:3e3})).present()})()}UsuarioInactivo(){var r=this;return(0,m.A)(function*(){(yield r.alertcontroller.create({header:"Usuario inactivo",message:"Contactar a admin@admin.cl",buttons:["OK"]})).present()})()}ErrorUsuario(){var r=this;return(0,m.A)(function*(){(yield r.alertcontroller.create({header:"Error..",message:"Revise sus credenciales",buttons:["OK"]})).present()})()}UsuarioNoExiste(){var r=this;return(0,m.A)(function*(){(yield r.alertcontroller.create({header:"No existe...",message:"Debe registrarse..",buttons:["OK"]})).present()})()}}return(t=n).\u0275fac=function(r){return new(r||t)(e.rXU(p.u),e.rXU(i.hG),e.rXU(i.K_),e.rXU(g.Ix),e.rXU(s.ok))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-alert"]],decls:28,vars:4,consts:[["slot","start"],["defaultHref","/","text","","color","dark"],[3,"formGroup"],["type","text","placeholder","ingrese username","label","Usuario","labelplacement","floating","formControlName","username"],["id","alerta",4,"ngIf"],["type","Password","placeholder","ingrese password","label","Password","labelplacement","floating","formControlName","password"],["shape","round","color","primary",3,"click","disabled"],["color","warning"],["slot","end"],["fill","clear"],["name","logo-instagram"],["name","logo-facebook"],["name","logo-twitter"],["id","alerta"]],template:function(r,o){if(1&r&&(e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),e.nrm(3,"ion-back-button",1),e.k0s(),e.j41(4,"ion-title"),e.EFF(5,"Inicio de Sesion"),e.k0s()()(),e.j41(6,"form",2)(7,"ion-item"),e.nrm(8,"ion-input",3),e.k0s(),e.DNE(9,F,3,2,"div",4),e.j41(10,"ion-item"),e.nrm(11,"ion-input",5),e.k0s(),e.DNE(12,A,3,2,"div",4),e.j41(13,"ion-row")(14,"ion-col")(15,"ion-button",6),e.bIt("click",function(){return o.login()}),e.EFF(16," Login "),e.k0s()()()(),e.j41(17,"ion-footer")(18,"ion-toolbar",7)(19,"ion-title"),e.EFF(20,"Duoc UC"),e.k0s(),e.j41(21,"ion-buttons",8)(22,"ion-button",9),e.nrm(23,"ion-icon",10),e.k0s(),e.j41(24,"ion-button",9),e.nrm(25,"ion-icon",11),e.k0s(),e.j41(26,"ion-button",9),e.nrm(27,"ion-icon",12),e.k0s()()()()),2&r){let l,d;e.R7$(6),e.Y8G("formGroup",o.loginForm),e.R7$(3),e.Y8G("ngIf",(null==(l=o.loginForm.get("username"))?null:l.invalid)&&((null==(l=o.loginForm.get("username"))?null:l.dirty)||(null==(l=o.loginForm.get("username"))?null:l.touched))),e.R7$(3),e.Y8G("ngIf",(null==(d=o.loginForm.get("password"))?null:d.invalid)&&((null==(d=o.loginForm.get("password"))?null:d.dirty)||(null==(d=o.loginForm.get("password"))?null:d.touched))),e.R7$(3),e.Y8G("disabled",!o.loginForm.valid)}},dependencies:[h.bT,s.qT,s.BC,s.cb,s.j4,s.JD,i.Jm,i.QW,i.hU,i.M0,i.eU,i.iq,i.$w,i.uz,i.ln,i.BC,i.ai,i.Gw,i.el]}),n})()}];let I=(()=>{var t;class n{}return(t=n).\u0275fac=function(r){return new(r||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({imports:[g.iI.forChild(P),g.iI]}),n})(),k=(()=>{var t;class n{}return(t=n).\u0275fac=function(r){return new(r||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({imports:[h.MD,s.YN,s.X1,i.bv,I]}),n})()}}]);