"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4757],{4757:(k,c,s)=>{s.r(c),s.d(c,{PerfilPageModule:()=>b});var h=s(177),a=s(4341),r=s(4742),l=s(8986),d=s(467),e=s(4438),f=s(1626),p=s(4796);const P=[{path:"",component:(()=>{var i;class n{constructor(t,o,m,F,v,M){this.menucontroller=t,this.httpclient=o,this.router=m,this.auth=F,this.alertcontroller=v,this.fBuilder=M,this.nombre="",this.email="",this.usuario={id:0,rut:0,username:"",password:"",email:"",isactive:!1},this.modificarForm=this.fBuilder.group({username:new a.MJ("",[a.k0.minLength(6)]),email:new a.MJ("",[a.k0.email]),password:new a.MJ("",[a.k0.pattern(/^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{8,}$/)]),imagenPerfil:new a.MJ("")})}ngOnInit(){this.nombre=sessionStorage.getItem("username")||"Usuario",this.obtenerData(),console.log("Usuario leido: ",this.usuario)}EditarPerfil(){this.modificarForm.valid&&this.auth.getuserbyusername(this.modificarForm.value.username).subscribe(t=>{this.userData=t,this.usuario.username=this.modificarForm.value.username||this.usuario.username,this.usuario.password=this.modificarForm.value.password||this.usuario.password,this.usuario.email=this.modificarForm.value.email||this.usuario.email,this.auth.putusuario(this.usuario).subscribe(),sessionStorage.setItem("username",this.usuario.username),this.modificarForm.reset(),this.mostrarMensaje(),this.router.navigateByUrl("/inicio")})}mostrarMensaje(){var t=this;return(0,d.A)(function*(){(yield t.alertcontroller.create({header:"Perfil de usuario",message:"Bienvenid@! "+t.usuario.username,buttons:["OK"]})).present()})()}obtenerData(){this.auth.getuserbyusername(this.nombre).subscribe(t=>{this.userData=t,this.usuario.id=this.userData[0].id,this.usuario.username=this.userData[0].username,this.usuario.rut=this.userData[0].rut,this.usuario.password=this.userData[0].password,this.usuario.email=this.userData[0].email,this.usuario.isactive=this.userData[0].isactive,console.log("usuario: ",this.usuario.username),console.log("id: ",this.usuario.id)})}mostrarMenu(){this.menucontroller.open("first")}}return(i=n).\u0275fac=function(t){return new(t||i)(e.rXU(r._t),e.rXU(f.Qq),e.rXU(l.Ix),e.rXU(p.u),e.rXU(r.hG),e.rXU(a.ok))},i.\u0275cmp=e.VBU({type:i,selectors:[["app-perfil"]],decls:31,vars:7,consts:[[3,"translucent"],["slot","end"],[3,"click"],["slot","end","name","menu-outline","size","large"],[3,"fullscreen"],["collapse","condense"],["size","large"],[3,"formGroup"],["type","text","formControlName","username","label","Username: ","labelPlacement","floating",3,"placeholder"],["type","email","formControlName","email","label","Email: ","labelPlacement","floating"],["type","password","formControlName","password","label","Password: ","labelPlacement","floating"],["expand","block","fill","solid","shape","round",3,"click"]],template:function(t,o){1&t&&(e.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1)(3,"ion-button",2),e.bIt("click",function(){return o.mostrarMenu()}),e.nrm(4,"ion-icon",3),e.k0s()(),e.j41(5,"ion-title"),e.EFF(6,"Mi Perfil"),e.k0s()()(),e.j41(7,"ion-content",4)(8,"ion-header",5)(9,"ion-toolbar")(10,"ion-title",6),e.EFF(11,"Usuario"),e.k0s()()(),e.j41(12,"ion-card")(13,"ion-card-header")(14,"ion-card-title"),e.EFF(15,"\xa1Datos Usuario!"),e.k0s(),e.j41(16,"ion-card-subtitle"),e.EFF(17),e.k0s(),e.j41(18,"ion-card-subtitle"),e.EFF(19),e.k0s(),e.j41(20,"ion-card-subtitle"),e.EFF(21),e.k0s()()(),e.j41(22,"form",7)(23,"ion-item"),e.nrm(24,"ion-input",8),e.k0s(),e.j41(25,"ion-item"),e.nrm(26,"ion-input",9),e.k0s(),e.j41(27,"ion-item"),e.nrm(28,"ion-input",10),e.k0s()(),e.j41(29,"ion-button",11),e.bIt("click",function(){return o.EditarPerfil()}),e.EFF(30," Editar perfil "),e.k0s()()),2&t&&(e.Y8G("translucent",!0),e.R7$(7),e.Y8G("fullscreen",!0),e.R7$(10),e.SpI("Nombre de usuario: ",o.usuario.username,""),e.R7$(2),e.SpI("Correo: ",o.usuario.email,""),e.R7$(2),e.SpI("Rut: ",o.usuario.rut,""),e.R7$(),e.Y8G("formGroup",o.modificarForm),e.R7$(2),e.FS9("placeholder",o.usuario.username))},dependencies:[a.qT,a.BC,a.cb,a.j4,a.JD,r.Jm,r.QW,r.b_,r.ME,r.HW,r.tN,r.W9,r.eU,r.iq,r.$w,r.uz,r.BC,r.ai,r.Gw]}),n})()}];let g=(()=>{var i;class n{}return(i=n).\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.$C({type:i}),i.\u0275inj=e.G2t({imports:[l.iI.forChild(P),l.iI]}),n})(),b=(()=>{var i;class n{}return(i=n).\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.$C({type:i}),i.\u0275inj=e.G2t({imports:[h.MD,a.YN,a.X1,r.bv,g]}),n})()}}]);